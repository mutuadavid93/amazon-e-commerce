<script setup>
import { ref } from "vue";
import { Link } from "@inertiajs/vue3";
import MapMarkerOutlineIcon from "vue-material-design-icons/MapMarkerOutline.vue";
import MenuDownIcon from "vue-material-design-icons/MenuDown.vue";
import MagnifyIcon from "vue-material-design-icons/Magnify.vue";
import CartMinusIcon from "vue-material-design-icons/CartMinus.vue";
import MenuIcon from "vue-material-design-icons/Menu.vue";
import AccountCircleIcon from "vue-material-design-icons/AccountCircle.vue";
import CloseIcon from "vue-material-design-icons/Close.vue";
import ChevronRightIcon from "vue-material-design-icons/ChevronRight.vue";

let showMenu = ref(false);
let accountAndList = ref(false);

const accountListFunc = (bool) => {
  setTimeout(() => {
    accountAndList.value = bool;
  }, 150);
};
</script>

<template>
  <div class="min-w-[1150px] bg-gray-100 h-full">
    <!-- Add a backdrop whenever we hover the Account & List menu item -->
    <div
      v-if="accountAndList"
      class="top-0 z-20 fixed w-full h-full bg-black bg-opacity-70"
    ></div>

    <div
      class="flex items-center bg-gray-900 h-[60px] py-2 fixed z-50 min-w-[1150px] w-full"
    >
      <div class="flex">
        <!-- NOTE: Link component is from inertia -->
        <Link
          class="text-white h-50px p-2 pt-3 border-[1px] border-gray-900 rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          AMAZON
        </Link>
      </div>

      <div
        class="text-white h-50px p-2 border-[1px] border-gray-900 rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
      >
        <div class="flex items-center justify-center">
          <MapMarkerOutlineIcon class="pt-2 -ml-1" fillColor="#F5F5F5" />

          <div>
            <div class="text-[13px] text-gray-300 font-extrabold">
              <div>Delivery to John Doe</div>
            </div>

            <div class="text-[15px] text-white-300 -mt-1.5 font-extrabold">
              <div>London SW2 SW2</div>
            </div>
          </div>
        </div>
      </div>

      <!-- grow translates to flex-grow: 1; allows the item to grow and take up any remaining space in the 
flex container after all other flex items have taken up their specified widths -->
      <div class="flex grow items-center h-[45px] px-1">
        <div
          class="flex items-center justify-center bg-gray-100 border-r border-r-gray-300 font-extrabold text-[11px] text-gray-600 w-[60px] h-[40px] rounded-l-md cursor-pointer"
        >
          <div class="pt-[3px]">All</div>

          <!-- TIP:  -mr-2: move the icon 8px to the right.

          focus:ring-0 removes the blue outline when the input is focused. 
          i.e. it's like the input is not focused 
           -->
          <MenuDownIcon fillColor="#5E5E5E" :size="20" class="-mr-2" />
        </div>

        <input
          type="text"
          class="block w-full border-none border-transparent focus:border-transparent focus:ring-0"
        />

        <!-- NOTE:  p-[5px] on below div adds h-[40px] to make h-[45px] -->
        <div class="cursor-pointer bg-orange-300 p-[5px] px-2 rounded-r-md">
          <MagnifyIcon :size="30" />
        </div>
      </div>

      <div class="flex">
        <div
          class="h-50px p-2 border-[1px] border-gray-900 rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <!-- justify-center: aligns the flex items along the horizontal axis at the center of the container. -->
          <div class="flex items-center justify-center mt-2.5 px-1">
            <img src="https://via.placeholder.com/35x20" alt="" />

            <!-- -mt-2 -mr-0.5: move the text upword to align with prev element and push it closer to the right -->
            <div class="text-[15px] text-white -mt-2 -mr-0.5 font-extrabold">EN</div>
            <MenuDownIcon fillColor="#C2C2C2" :size="20" class="-mt-1.5 pr-1 -mr-4" />
          </div>
        </div>

        <div
          @mouseenter="accountListFunc(true)"
          @mouseleave="accountListFunc(false)"
          class="h-50px p-2 border-[1px] border-gray-900 rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-center">
            <div>
              <div class="text-[12px] text-white font-extrabold">
                Hello, <span>sign in</span>
              </div>
              <div class="flex items-center">
                <div class="text-[15px] text-white -mt-1.5 font-extrabold">
                  Account & List
                </div>
                <MenuDownIcon fillColor="#C2C2C2" :size="20" class="-mt-1 pr-1 -mr-4" />
              </div>
            </div>
          </div>

          <!-- Dropdown menu on hover, -->
          <!-- TIP: absolute can also be contained in an element which isn't explicitly defined as relative.
HINT: in this case the element will be relative to the viewport.
 -->
          <div
            v-if="accountAndList"
            class="bg-white absolute z-50 top-[56px] -ml-[230px] w-[480px] rounded-sm px-6"
          >
            <div>
              <div class="flex items-center justify-between py-2.5 border-b">
                <div class="text-sm p-2">Who's shopping? Select a profile.</div>
                <div
                  class="flex items-center text-sm pl-2 font-bold text-teal-600 hover:text-red-600 hover:underline"
                >
                  Manage Profile
                  <ChevronRightIcon :size="20" fillColor="#808080" />
                </div>
              </div>

              <div class="flex">
                <div class="w-1/2 border-r">
                  <div class="pb-3">
                    <div class="font-extrabold pt-3">Your List</div>
                    <div class="text-sm hover:text-red-600 hover:underline pt-3">
                      Create a list
                    </div>
                  </div>
                </div>
                <div class="w-1/2 ml-5">
                  <div class="pb-3">
                    <div class="font-extrabold pt-3">Your Account</div>
                    <div class="text-sm hover:text-red-600 hover:underline pt-3">
                      Account
                    </div>
                    <div class="text-sm hover:text-red-600 hover:underline pt-3">
                      Sign Out
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="h-50px p-2 border-[1px] border-gray-900 rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-center">
            <div>
              <div class="text-[12px] text-white font-extrabold">Returns</div>
              <div class="flex items-center">
                <div class="text-[15px] text-white -mt-1.5 font-extrabold">& Orders</div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="relative h-50px p-2 border-[1px] border-gray-900 rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <!-- NOTE: div can also have span parent -->
          <span
            class="absolute text-center right-[21px] w-[14px] top-0 rounded-full text-[20px]"
          >
            <div class="text-orange-400 font-extrabold bg-gray-900 h-[16px]">0</div>
          </span>
          <div class="flex items-center justify-center">
            <CartMinusIcon fillColor="#FCFCFC" :size="40" class="-mt-0.5" />
          </div>
        </div>
      </div>
    </div>

    <!-- NOTE: This is the second/sub navigation.
    min-w-[1150px] : ensures the width of the container is at least 1150px similar to main navigation
     -->
    <div
      class="flex items-center justify-between bg-[#232F3E] h-[38px] fixed z-40 min-w-[1150px] w-full mt-[60px]"
    >
      <div class="flex">
        <div
          @click="showMenu = true"
          class="flex h-[30px] border-[1px] border-[#232F3E] rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-between px-2">
            <MenuIcon fillColor="#F5F5F5" :size="26" class="mr-0.5" />
            <div class="text-[14px] text-white font-extrabold">All</div>
          </div>
        </div>
        <div
          class="flex h-[30px] border-[1px] border-[#232F3E] rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-between px-2">
            <div class="text-[14px] text-white font-extrabold">Today's Deals</div>
          </div>
        </div>
        <div
          class="flex h-[30px] border-[1px] border-[#232F3E] rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-between px-2">
            <div class="text-[14px] text-white font-extrabold">Gift Cards</div>
          </div>
        </div>
        <div
          class="flex h-[30px] border-[1px] border-[#232F3E] rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-between px-2">
            <div class="text-[14px] text-white font-extrabold">Buy Again</div>
          </div>
        </div>
        <div
          class="flex h-[30px] border-[1px] border-[#232F3E] rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-between px-2">
            <div class="text-[14px] text-white font-extrabold">Customer Service</div>
          </div>
        </div>
        <div
          class="flex h-[30px] border-[1px] border-[#232F3E] rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-between px-2">
            <div class="text-[14px] text-white font-extrabold">John's Amazon.com</div>
          </div>
        </div>
      </div>

      <div class="flex">
        <div
          class="flex h-[30px] border-[1px] border-[#232F3E] rounded-sm hover:border-[1px] hover:border-gray-100 cursor-pointer"
        >
          <div class="flex items-center justify-between px-2">
            <div class="text-[14px] text-white font-extrabold">Holiday Fashion Deals</div>
          </div>
        </div>
      </div>
    </div>

    <main class="max-w-[1500px] mx-auto">
      <div class="pt-[98px]"></div>
      <!-- Any other dynamic content displays here -->
      <slot />
    </main>

    <!-- Footer -->
    <div class="w-full bg-white mt-10">
      <div class="max-w-[1500px] mx-auto">
        <div class="text-[23px] pt-4 font-extrabold">
          Recommeded based on your shopping trends
        </div>

        <!-- items-stretch: causes the flex items to expand vertically to match the height of the container
, essentially stretching them to fill the available space along the cross-axis.
i.e.  ensuring all child elements have equal height
 -->
        <div class="flex justify-center items-stretch">
          <div class="p-4 text-center mx-auto">
            <!-- overflow-hidden: clips any content that exceeds the container's dimensions. -->
            <div class="w-[150px] h-[150px] overflow-hidden">
              <img src="https://via.placeholder.com/150x150" alt="" />
            </div>
            <div
              class="w-[160px] text-[12px] py-2 text-teal-600 font-extrabold hover:text-red-600 cursor-pointer"
            >
              This is a test title
            </div>
            <div class="flex justify-start">
              <div class="text-xs font-extrabold text-red-600 w-full text-left">
                $99.99
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="bg-[#232F3E]">
      <div
        class="bg-[#37475A] hover:bg-gray-600 w-full p-3.5 cursor-pointer text-white font-extrabold text-center"
      >
        Back to top
      </div>
      <div
        class="flex items-stretch justify-between max-w-[1000px] mx-auto pt-10 text-white"
      >
        <ul>
          <li class="font-extrabold text-lg">Get to Know Us</li>
          <li class="hover:underline cursor-pointer">Careers</li>
          <li class="hover:underline cursor-pointer">About Amazon</li>
          <li class="hover:underline cursor-pointer">Investor Relations</li>
          <li class="hover:underline cursor-pointer">Amazon Devices</li>
          <li class="hover:underline cursor-pointer">Amazon Science</li>
        </ul>

        <ul>
          <li class="font-extrabold text-lg">Make Money with Us</li>
          <li class="hover:underline cursor-pointer">Sell products on Amazon</li>
          <li class="hover:underline cursor-pointer">Sell on Amazon Business</li>
          <li class="hover:underline cursor-pointer">Sell apps on Amazon</li>
          <li class="hover:underline cursor-pointer">Become an Affiliate</li>
          <li class="hover:underline cursor-pointer">Advertise Your Products</li>
          <li class="hover:underline cursor-pointer">Self-Publish with Us</li>
          <li class="hover:underline cursor-pointer">Host an Amazon Hub</li>
          <li class="hover:underline cursor-pointer">Sell on Amazon Business</li>
          <li class="hover:underline cursor-pointer">Sell apps on Amazon</li>
          <li class="hover:underline cursor-pointer">Become an Affiliate</li>
        </ul>

        <ul>
          <li class="font-extrabold text-lg">Get to Know Us</li>
          <li class="hover:underline cursor-pointer">Careers</li>
          <li class="hover:underline cursor-pointer">About Amazon</li>
          <li class="hover:underline cursor-pointer">Investor Relations</li>
          <li class="hover:underline cursor-pointer">Amazon Devices</li>
          <li class="hover:underline cursor-pointer">Amazon Science</li>
        </ul>

        <ul>
          <li class="font-extrabold text-lg">Make Money with Us</li>
          <li class="hover:underline cursor-pointer">Sell products on Amazon</li>
          <li class="hover:underline cursor-pointer">Sell on Amazon Business</li>
          <li class="hover:underline cursor-pointer">Sell apps on Amazon</li>
          <li class="hover:underline cursor-pointer">Become an Affiliate</li>
          <li class="hover:underline cursor-pointer">Advertise Your Products</li>
          <li class="hover:underline cursor-pointer">Self-Publish with Us</li>
          <li class="hover:underline cursor-pointer">Host an Amazon Hub</li>
        </ul>
      </div>
      <div class="mb-10"></div>
    </footer>
  </div>

  <!-- Side Menu -->
  <div
    v-if="showMenu"
    class="top-0 z-50 fixed w-full h-full bg-black bg-opacity-70"
    :class="[showMenu ? 'animate__animated animate__fadeIn animate__faster' : '']"
  >
    <CloseIcon
      @click="showMenu = false"
      :size="30"
      fillColor="#DCDCDC"
      class="ml-2.5 mt-3.5 left-80 cursor-pointer fixed z-50"
      :class="[showMenu ? 'animate__animated animate__fadeIn animate__faster' : '']"
    />

    <div
      :class="[showMenu ? 'animate__animated animate__slideInLeft animate__faster' : '']"
      class="w-80 h-full bg-white"
    >
      <div
        class="bg-[#232F3E] font-extrabold tex-[18px] flex items-center p-2 text-white pl-7"
      >
        <span>Hello, Sign in</span>
      </div>

      <div class="font-extrabold text-[16px] pt-3 pb-1 pl-6 pr-3 text-black">
        Shop By Department
      </div>

      <div class="hover:bg-gray-200 pl-6 pr-3">
        <div
          class="py-2.5 text-[13px] text-black flex justify-between items-center hover:bg-gray-200 cursor-pointer"
        >
          Computers
          <ChevronRightIcon :size="20" fillColor="#808080" />
        </div>
      </div>
    </div>
  </div>
</template>
